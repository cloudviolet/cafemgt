<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cafemgt.dao.StoreMapper">
	<resultMap type="StoreDto" id="StoreResultMap">
		<result property="storeInfoCode"	 			column="store_info_code" />
		<result property="memberId"	 					column="member_id" />
		<result property="storeInfoName"	 			column="store_info_name" />
		<result property="storeInfoLicenseNumber"	 	column="store_info_license_number" />
		<result property="storeInfoIndustryType"	 	column="store_info_industry_type" />
		<result property="storeInfoAddr"	 			column="store_info_addr" />
		<result property="storeInfoPhone"	 			column="store_info_phone" />
		<result property="storeInfoRegDate"	 			column="store_info_reg_date" />		
	</resultMap>
	<!-- store 사업장 등록 -->
	<insert id="addStore" parameterType="StoreDto">
	INSERT INTO tb_store_info
		(store_info_code
		, member_id
		, store_info_name
		, store_info_license_number
		, store_info_industry_type
		, store_info_addr
		, store_info_phone
		, store_info_reg_date)
	VALUES (sf_new_store_info_code()
			, #{memberId}
			, #{storeInfoName}
			, #{storeInfoLicenseNumber}
			, #{storeInfoIndustryType}
			, #{storeInfoAddr}
			, #{storeInfoPhone}
			, NOW())
	
	</insert>
	
	
	<!-- store 사업장 조회(관리자) -->
	<select id="getStoreadmin" parameterType="String" resultMap="StoreResultMap">
		SELECT 
			 store_info_code
			,member_id
			,store_info_name
			,store_info_license_number
			,store_info_industry_type
			,store_info_addr
			,store_info_phone
			,store_info_reg_date
		FROM 
			tb_store_info
	</select>
	
	<!-- store 사업장 조회(사업자) -->
	<select id="getStore" parameterType="String" resultMap="StoreResultMap">
      SELECT 
         store_info_code
         , member_id
         , store_info_name
         , store_info_license_number
         , store_info_industry_type
         , store_info_addr
         , store_info_phone
         , store_info_reg_date
      FROM 
         tb_store_info
      WHERE 
         member_id =#{MID}
   </select>
		
	<!-- 마이페이지 사업장 정보 부분 -->
	<select id="getStoreMy" parameterType="String" resultMap="StoreResultMap">
      SELECT 
         store_info_code
         , member_id
         , store_info_name
         , store_info_license_number
         , store_info_industry_type
         , store_info_addr
         , store_info_phone
         , store_info_reg_date
      FROM 
         tb_store_info
      WHERE 
         store_info_code =#{SSTORECODE}
   </select>
</mapper>