<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">

	<th:block layout:fragment="customTitle">
		<title>사업장 등록</title>
</th:block>

	<th:block layout:fragment="customCss">
			<!-- bootstrap-wysiwyg -->
		<link th:href="@{/vendors/google-code-prettify/bin/prettify.min.css}" rel="stylesheet">
		<!-- Select2 -->
		<link th:href="@{/vendors/select2/dist/css/select2.min.css}" rel="stylesheet">
		<!-- Switchery -->
		<link th:href="@{/vendors/switchery/dist/switchery.min.css}" rel="stylesheet">
		<!-- starrr -->
		<link th:href="@{/vendors/starrr/dist/starrr.css}" rel="stylesheet">
		<!-- bootstrap-daterangepicker -->
		<link th:href="@{/vendors/bootstrap-daterangepicker/daterangepicker.css}" rel="stylesheet">
	</th:block>
	<th:block layout:fragment="customContents">
		<div class="right_col" role="main">
			<div class="row">
				<div class="col-md-12 col-sm-12 ">
					<div class="x_panel">
						<div class="x_title">
							<h2>사업장 등록</h2>
							<div class="clearfix"></div>
						</div>
						<div class="x_content">
							<br />
							<!-- 메인콘텐츠 Start -->
							<form th:action="@{/addstore}" method="post" id="demo-form2" data-parsley-validate class="form-horizontal form-label-left">
								<input type="hidden" name="memberId" th:value="${session.MID}">
								
								<div class="form-group row">
									<label class="col-form-label col-md-3 col-sm-3 label-align" for="storeInfoName">상호명 * <span class="required"></span>
									</label>
									<div class="col-md-6 col-sm-6 ">
										<input type="text" id="storeInfoName" name="storeInfoName" required="required" class="form-control storeInfoName"/>												
									</div>	
								</div>
								<div class="form-group row">
									<label class="col-form-label col-md-3 col-sm-3 label-align" for="storeInfoLicenseNumber">사업자 번호 * <span class="required"></span>
									</label>
									<div class="col-md-6 col-sm-6 ">								
										<input type="text" id="storeInfoLicenseNumber" data-inputmask="'mask': '999-99-99999'" 
										name="storeInfoLicenseNumber" data-parsley-error-message="*필수 입력사항 " class="form-control" required='required' placeholder="000-00-00000"/>
									</div>
								</div>		
								
								<div class="form-group row">
									<label class="col-form-label col-md-3 col-sm-3 label-align" for="storeInfoIndustryType">업종 * <span class="required"></span>
									</label>
									<div class="col-md-6 col-sm-6 ">
										<input type="text" id="storeInfoIndustryType" name="storeInfoIndustryType" required="required" class="form-control storeInfoIndustryType"/>												
									</div>	
								</div>

								<div class="form-group row">
									<label class="col-form-label col-md-3 col-sm-3 label-align" for="storeInfoAddr">우편번호
									</label>
										<div class="col-md-6 col-sm-6 ">
										<input type ="text" name="storeInfoZipCode" id="storeInfoZipCode" placeholder = "우편번호" readonly>
										<input type = "button" class="btn btn-info btn-sm" value ="주소찾기" onclick="DaumPostcode()">
										</div>
								</div>
								<div id="wrap" style="display:none;border:1px solid;width:500px;height:300px;margin:5px 110px;position:relative;"> 
									<img src="//i1.daumcdn.net/localimg/localimages/07/postcode/320/close.png" id="btnFoldWrap" 
									style="cursor:pointer; position:relative; right:0px; top:-1px; z-index:1" onclick="foldDaumPostcode()" alt="접기 버튼">
								</div>
								<div class="form-group row">
									<label class="col-form-label col-md-3 col-sm-3 label-align" for="storeInfoAddr">주소
									</label>
									<div class="col-md-6 col-sm-6 ">
									<input type="text" id="storeInfoAddr" name="storeInfoAddr" placeholder="주소찾기 버튼을 눌러주세요." class="form-control storeInfoAddr" readonly/>
									</div>		
								</div>
								
								
								<div class="form-group row">
									<label class="col-form-label col-md-3 col-sm-3 label-align" for="storeInfoAddr">상세주소
									</label>
									<div class="col-md-6 col-sm-6 ">
										<input type = "text" name="storeInfoAddr2" id ="storeInfoAddr2" placeholder ="상세주소를 입력해주세요"  class="form-control storeInfoAddr2" >	
									</div>		
								</div>
								
								
								<div class="form-group row">
									<label class="col-form-label col-md-3 col-sm-3 label-align" for="storeInfoPhone">사업장 전화번호
									</label>
									<div class="col-md-6 col-sm-6 ">								
										<input type="text" id="storeInfoPhone" name="storeInfoPhone" class="form-control storeInfoPhone" />
									</div>
								</div>

								<div class="ln_solid"></div>
								<div class="form-group row">
									<div class="col-md-4 col-sm-8 offset-md-4 text-center">
										<button class="btn btn-primary" type="reset">다시 작성</button>
										<button type="submit" class="btn btn-success">등록 하기</button>
									</div>
								</div>
							</form>
							<!-- 메인콘텐츠 End -->
						</div>
					</div>
				</div>
			</div>		
		</div>
	</th:block>
	<th:block layout:fragment="customJs">
	
	
	<!-- bootstrap-daterangepicker -->
	<script th:src="@{/vendors/moment/min/moment.min.js}"></script>
	<script th:src="@{/vendors/bootstrap-daterangepicker/daterangepicker.js}"></script>
	<!-- bootstrap-wysiwyg -->
	<script th:src="@{/vendors/bootstrap-wysiwyg/js/bootstrap-wysiwyg.min.js}"></script>
	<script th:src="@{/vendors/jquery.hotkeys/jquery.hotkeys.js}"></script>
	<script th:src="@{/vendors/google-code-prettify/src/prettify.js}"></script>
	<!-- jQuery Tags Input -->
	<script th:src="@{/vendors/jquery.tagsinput/src/jquery.tagsinput.js}"></script>
	<!-- Switchery -->
	<script th:src="@{/vendors/switchery/dist/switchery.min.js}"></script>
	<!-- Select2 -->
	<script th:src="@{/vendors/select2/dist/js/select2.full.min.js}"></script>
	<!-- Parsley -->
	<script th:src="@{/vendors/parsleyjs/dist/parsley.js}"></script>
	<!-- Autosize -->
	<script th:src="@{/vendors/autosize/dist/autosize.min.js}"></script>
	<!-- jQuery autocomplete -->
	<script th:src="@{/vendors/devbridge-autocomplete/dist/jquery.autocomplete.min.js}"></script>
	<!-- starrr -->
	<script th:src="@{/vendors/starrr/dist/starrr.js}"></script>
	
	<!-- input mask 스크립트 0325 추가 -->
    <!-- jquery.inputmask -->
    <script src="../vendors/jquery.inputmask/dist/min/jquery.inputmask.bundle.min.js"></script>
    <!-- 연락처 스크립트 -->
	<script type="text/javascript">
		$(document).on("keyup", ".storeInfoPhone", function() { $(this).val( $(this).val().replace(/[^0-9]/g, "").replace(/(^02|^0505|^1[0-9]{3}|^0[0-9]{2})([0-9]+)?([0-9]{4})$/,"$1-$2-$3").replace("--", "-") ); });

	</script>
	
	<!-- ----- DAUM 우편번호 API 시작 ----- --> 
	
 	<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>
	 <script>
	  // 우편번호 찾기 화면을 넣을 element 
	  var element_wrap = document.getElementById('wrap');
	  function foldDaumPostcode() { 
		  // iframe을 넣은 element를 안보이게 한다. 
		  element_wrap.style.display = 'none'; 
		  } 
	  function DaumPostcode() {
		  // 현재 scroll 위치를 저장해놓는다.
		  var currentScroll = Math.max(document.body.scrollTop, document.documentElement.scrollTop); 
		  new daum.Postcode({ oncomplete: function(data) { 
			  // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분. 
			  // 각 주소의 노출 규칙에 따라 주소를 조합한다.
			  // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
			  var fullAddr = data.address; 
			  // 최종 주소 변수 
			  var extraAddr = ''; 
			  // 조합형 주소 변수
			  // 기본 주소가 도로명 타입일때 조합한다.
			  if(data.addressType === 'R'){ 
				  //법정동명이 있을 경우 추가한다.
				  if(data.bname !== ''){
					  extraAddr += data.bname;
					} 
				  // 건물명이 있을 경우 추가한다. 
				  if(data.buildingName !== ''){ 
					  extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
					  } 
				  // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다. 
				  fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : ''); 
				  } 
			  // 우편번호와 주소 정보를 해당 필드에 넣는다.	
			  document.getElementById('storeInfoZipCode').value = data.zonecode;
			  //5자리 새우편번호 사용
			  document.getElementById('storeInfoAddr').value = fullAddr;
		  // iframe을 넣은 element를 안보이게 한다. 
		  // (autoClose:false 기능을 이용한다면, 아래 코드를 제거해야 화면에서 사라지지 않는다.) 
		  element_wrap.style.display = 'none';
		  // 우편번호 찾기 화면이 보이기 이전으로 scroll 위치를 되돌린다. 
		  document.body.scrollTop = currentScroll; 
		  $('#storeInfoAddr2').focus(); 
		  }, 
		  // 우편번호 찾기 화면 크기가 조정되었을때 실행할 코드를 작성하는 부분. iframe을 넣은 element의 높이값을 조정한다.
		  onresize : function(size) {
			  element_wrap.style.height = size.height+'px'; 
			  }, 
			  width : '100%', 
			  height : '100%'
			  }).embed(element_wrap); 
	  // iframe을 넣은 element를 보이게 한다. 
	  element_wrap.style.display = 'block'; 
	  } </script>

	
	</th:block>	
	

</html>